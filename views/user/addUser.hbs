<div class="w-[93%] mx-auto">
{{#if msg}}
 <div class="w-full md:w-[50%] xl:w-[30%] mx-auto bg-red-300 px-4 py-4 text-center my-2">
    <span>{{msg}}</span>
 </div>
{{/ if}}
 <div class="max-w-4xl mx-auto my-8 p-6 bg-white shadow-lg rounded-lg">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">{{headline}}</h2>
  <form action="{{action}}" method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
    
    <!-- Geschlecht -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Geschlecht</label>
      <select name="gender" id="gender" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100">
        <option value="m" selected>Männlich</option>
        <option value="w">Weiblich</option>
        <option value="d">Divers</option>
      </select>
    </div>

    <!-- Rolle -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Rolle</label>
      <select name="role" id="role" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100">
          <option value="admin">Admin</option>
          <option value="groundskeeper">Platzwart</option>
          <option value="member" selected>Mitglied</option>
      </select>
    </div>

    <!-- Vorname -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Vorname</label>
      <input type="text" name="firstname" id="firstname" placeholder="Maximilian" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- Nachname -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Nachname</label>
      <input type="text" name="lastname" id="lastname" placeholder="Mustermann" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- E-Mail -->
    <div class="md:col-span-2">
      <label class="block text-gray-700 mb-1 font-medium">E-Mail</label>
      <input type="text" name="username" id="email" placeholder="max.mustermann@gmail.com" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- Passwort -->
    {{#if (not isEdit)}}
    <div class="md:col-span-2">
      <label class="block text-gray-700 mb-1 font-medium">Passwort</label>
      <div class="relative flex items-center">
        <input type="password" id="pwd" name="password" placeholder="Maxi1234" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
        <img src="/media/images/eye_hidden.png" id="eye" class="h-6 w-6 absolute right-3 cursor-pointer" />
      </div>
    </div>
    {{/if}}

    <!-- Straße -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Straße</label>
      <input type="text" name="street" id="street" placeholder="Musterstraße" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- Hausnummer -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Hausnummer</label>
      <input type="text" name="houseNumber" id="houseNumber" placeholder="31" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- PLZ -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Postleitzahl</label>
      <input type="text" name="zip" id="zip" placeholder="2463" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>

    <!-- Stadt -->
    <div>
      <label class="block text-gray-700 mb-1 font-medium">Stadt</label>
      <input type="text" name="city" id="city" placeholder="Stixneusiedl" class="w-full py-2 px-3 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-gray-100" />
    </div>


    <div class="col-span-1 md:col-span-2 flex justify-end">
         <!-- Cancel Button -->
        <div>
        <button type="button" class="bg-cyan-600 text-white font-medium px-6 py-2 rounded hover:bg-cyan-700 transition-colors" onclick="window.location.href='/user/usermanagement'">
            Zurück
        </button>
        </div>

        <!-- Submit Button -->
        <div class="ml-3">
        <button type="submit" class="bg-cyan-600 text-white font-medium px-6 py-2 rounded hover:bg-cyan-700 transition-colors">
            {{btnTxt}}
        </button>
        </div>
    </div>
    {{#if isEdit}}
        <input type="hidden" id="userID" name="userID" value="{{user.userID}}" />
    {{/if}}
  </form>
 </div>
</div>
<script>
    {{#if (not isEdit)}}
    showPwd();
    function showPwd(){
        const eye = document.getElementById('eye');
        const pwd = document.getElementById('pwd');
        eye.addEventListener('click', () => {
            const isHidden = eye.src.includes("eye_hidden.png");
            eye.src = isHidden ? "/media/images/eye_show.png" : "/media/images/eye_hidden.png";
            pwd.type = isHidden ? "text" : "password";
        });
    }
    {{/if}}
    
    {{#if isEdit}}
    setValues();
    function setValues(){
        const user = {{{json user}}};
        document.querySelector('[name=gender]').value = user.gender;
        document.querySelector('[name=role]').value = user.role;
        document.getElementById('firstname').value = user.firstname;
        document.getElementById('lastname').value = user.lastname;
        document.getElementById('email').value = user.email;
        document.getElementById('street').value = user.street;
        document.getElementById('houseNumber').value = user.houseNumber;
        document.getElementById('zip').value = user.zip;
        document.getElementById('city').value = user.city;
    }
    {{/if}}
</script>